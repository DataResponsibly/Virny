
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Responsible AI Toolset in Python">
      
      
      
      
        <link rel="prev" href="../Multiple_Models_Interface_With_Multiple_Test_Sets/">
      
      
        <link rel="next" href="../Multiple_Models_Interface_With_Postprocessor/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Multiple Models Interface With Inprocessor - Virny</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","UA-63302552-3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","UA-63302552-3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=UA-63302552-3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multiple-models-interface-with-inprocessor" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Virny" class="md-header__button md-logo" aria-label="Virny" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Virny
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multiple Models Interface With Inprocessor
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DataResponsibly/Virny" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    DataResponsibly/virny
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../introduction/welcome_to_virny/" class="md-tabs__link">
          
  
    
  
  Introduction üöÄ

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Multiple_Models_Interface_Use_Case/" class="md-tabs__link">
          
  
    
  
  Examples üç±

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../glossary/bootstrap_approach/" class="md-tabs__link">
          
  
    
  
  Glossary üìñ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/overview/" class="md-tabs__link">
          
  
    
  
  API Reference üìö

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../release_notes/0.6.0/" class="md-tabs__link">
          
  
    
  
  Release Notes üìí

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Virny" class="md-nav__button md-logo" aria-label="Virny" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Virny
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DataResponsibly/Virny" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    DataResponsibly/virny
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction üöÄ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction üöÄ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/welcome_to_virny/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Virny
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/virny_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virny Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/virnyview_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive VirnyView Tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Examples üç±
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples üç±
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multiple_Models_Interface_Use_Case/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multiple_Models_Interface_With_DB_Writer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models With DB Writer Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multiple_Models_Interface_With_Error_Analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models Interface With Error Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multiple_Models_Interface_With_Multiple_Test_Sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models Interface For Multiple Test Sets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Multiple Models Interface With Inprocessor
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Multiple Models Interface With Inprocessor
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#import-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Import dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialize-input-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize Input Variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Initialize Input Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-config-object" class="md-nav__link">
    <span class="md-ellipsis">
      Create a config object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocess-the-dataset-and-create-a-baseflowdataset-class" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocess the dataset and create a BaseFlowDataset class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-an-inprocessor-and-create-a-wrapper-for-it" class="md-nav__link">
    <span class="md-ellipsis">
      Define an inprocessor and create a wrapper for it
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subgroup-metrics-computation" class="md-nav__link">
    <span class="md-ellipsis">
      Subgroup Metrics Computation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-metrics-composition" class="md-nav__link">
    <span class="md-ellipsis">
      Group Metrics Composition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics-visualization-and-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics Visualization and Reporting
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multiple_Models_Interface_With_Postprocessor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models Interface With Postprocessor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multiple_Models_Interface_With_PyTorch_Tabular/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models Interface With PyTorch Tabular
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Glossary üìñ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Glossary üìñ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/bootstrap_approach/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measuring the Model Arbitrariness
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/overall_performance_dimensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overall Performance Dimensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/disparity_performance_dimensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disparity Performance Dimensions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference üìö
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference üìö
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    analyzers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            analyzers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/AbstractOverallVarianceAnalyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AbstractOverallVarianceAnalyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/AbstractSubgroupAnalyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AbstractSubgroupAnalyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/BatchOverallVarianceAnalyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BatchOverallVarianceAnalyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/BatchOverallVarianceAnalyzerPostProcessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BatchOverallVarianceAnalyzerPostProcessing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/SubgroupErrorAnalyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SubgroupErrorAnalyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/SubgroupVarianceAnalyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SubgroupVarianceAnalyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/analyzers/SubgroupVarianceCalculator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SubgroupVarianceCalculator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    custom_classes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            custom_classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/custom-classes/BaseFlowDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseFlowDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/custom-classes/MetricsComposer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MetricsComposer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/custom-classes/MetricsInteractiveVisualizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MetricsInteractiveVisualizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/custom-classes/MetricsVisualizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MetricsVisualizer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    datasets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/ACSEmploymentDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACSEmploymentDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/ACSIncomeDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACSIncomeDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/ACSMobilityDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACSMobilityDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/ACSPublicCoverageDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACSPublicCoverageDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/ACSTravelTimeDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACSTravelTimeDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/BankMarketingDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BankMarketingDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/CardiovascularDiseaseDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CardiovascularDiseaseDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/CompasDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CompasDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/CompasWithoutSensitiveAttrsDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CompasWithoutSensitiveAttrsDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/DiabetesDataset2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DiabetesDataset2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/GermanCreditDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GermanCreditDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/LawSchoolDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LawSchoolDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/RicciDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RicciDataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datasets/StudentPerformancePortugueseDataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StudentPerformancePortugueseDataset
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    metrics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            metrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/aleatoric-uncertainty/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aleatoric_uncertainty
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/confusion-matrix-metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    confusion_matrix_metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/iqr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iqr
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/jitter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jitter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/label-stability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    label_stability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/mean-prediction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mean_prediction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/overall-uncertainty/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    overall_uncertainty
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/statistical-bias/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    statistical_bias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/metrics/std/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    std
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    preprocessing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            preprocessing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/preprocessing/get-dummies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    get_dummies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/preprocessing/make-features-dfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    make_features_dfs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/preprocessing/preprocess-dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    preprocess_dataset
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    user_interfaces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            user_interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/user-interfaces/compute-metrics-with-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    compute_metrics_with_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/user-interfaces/compute-metrics-with-db-writer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    compute_metrics_with_db_writer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/user-interfaces/compute-metrics-with-multiple-test-sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    compute_metrics_with_multiple_test_sets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    utils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utils/count-prediction-metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    count_prediction_metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utils/create-test-protected-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    create_test_protected_groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utils/tune-ML-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tune_ML_models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utils/validate-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validate_config
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Release Notes üìí
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Release Notes üìí
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0.6.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.6.0 - 2024-09-02
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0.5.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.5.0 - 2024-06-02
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0.4.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.4.0 - 2024-01-29
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0.3.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.3.0 - 2023-08-14
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0.2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.2.0 - 2023-05-15
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0.1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.1.0 - 2023-02-06
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#import-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Import dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialize-input-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize Input Variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Initialize Input Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-config-object" class="md-nav__link">
    <span class="md-ellipsis">
      Create a config object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocess-the-dataset-and-create-a-baseflowdataset-class" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocess the dataset and create a BaseFlowDataset class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-an-inprocessor-and-create-a-wrapper-for-it" class="md-nav__link">
    <span class="md-ellipsis">
      Define an inprocessor and create a wrapper for it
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subgroup-metrics-computation" class="md-nav__link">
    <span class="md-ellipsis">
      Subgroup Metrics Computation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-metrics-composition" class="md-nav__link">
    <span class="md-ellipsis">
      Group Metrics Composition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics-visualization-and-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics Visualization and Reporting
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="multiple-models-interface-with-inprocessor">Multiple Models Interface With Inprocessor<a class="headerlink" href="#multiple-models-interface-with-inprocessor" title="Permanent link">&para;</a></h1>
<p>In this example, we are going to audit one inprocessor from AIF360 for stability and fairness, visualize metrics, and create an analysis report. For that, we will use <code>compute_metrics_with_config</code> interface that can compute metrics for multiple models. Thus, we will need to do the next steps:</p>
<ul>
<li>
<p>Initialize input variables</p>
</li>
<li>
<p>Compute subgroup metrics</p>
</li>
<li>
<p>Make group metrics composition</p>
</li>
<li>
<p>Create metrics visualizations and an analysis report</p>
</li>
</ul>
<h2 id="import-dependencies">Import dependencies<a class="headerlink" href="#import-dependencies" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>

<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>

<span class="kn">from</span> <span class="nn">sklearn.compose</span> <span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">OneHotEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="kn">from</span> <span class="nn">virny.utils.custom_initializers</span> <span class="kn">import</span> <span class="n">create_config_obj</span><span class="p">,</span> <span class="n">read_model_metric_dfs</span>
<span class="kn">from</span> <span class="nn">virny.user_interfaces.multiple_models_api</span> <span class="kn">import</span> <span class="n">compute_metrics_with_config</span>
<span class="kn">from</span> <span class="nn">virny.preprocessing.basic_preprocessing</span> <span class="kn">import</span> <span class="n">preprocess_dataset</span>
<span class="kn">from</span> <span class="nn">virny.custom_classes.metrics_visualizer</span> <span class="kn">import</span> <span class="n">MetricsVisualizer</span>
<span class="kn">from</span> <span class="nn">virny.custom_classes.metrics_composer</span> <span class="kn">import</span> <span class="n">MetricsComposer</span>
</code></pre></div>
<h2 id="initialize-input-variables">Initialize Input Variables<a class="headerlink" href="#initialize-input-variables" title="Permanent link">&para;</a></h2>
<p>Based on the library flow, we need to create 3 input objects for a user interface:</p>
<ul>
<li>
<p>A <strong>config yaml</strong> that is a file with configuration parameters for different user interfaces for metrics computation.</p>
</li>
<li>
<p>A <strong>dataset class</strong> that is a wrapper above the user‚Äôs raw dataset that includes its descriptive attributes like a target column, numerical columns, categorical columns, etc. This class must be inherited from the BaseDataset class, which was created for user convenience.</p>
</li>
<li>
<p>Finally, a <strong>models config</strong> that is a Python dictionary, where keys are model names and values are initialized models for analysis. This dictionary helps conduct audits for different analysis modes and analyze different types of models.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">DATASET_SPLIT_SEED</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">MODELS_TUNING_SEED</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">TEST_SET_FRACTION</span> <span class="o">=</span> <span class="mf">0.2</span>
</code></pre></div>
<h3 id="create-a-config-object">Create a config object<a class="headerlink" href="#create-a-config-object" title="Permanent link">&para;</a></h3>
<p><code>compute_metrics_with_config</code> interface requires that your <strong>yaml file</strong> includes the following parameters:</p>
<ul>
<li>
<p><strong>dataset_name</strong>: str, a name of your dataset; it will be used to name files with metrics.</p>
</li>
<li>
<p><strong>bootstrap_fraction</strong>: float, the fraction from a train set in the range [0.0 - 1.0] to fit models in bootstrap (usually more than 0.5).</p>
</li>
<li>
<p><strong>random_state</strong>: int, a seed to control the randomness of the whole model evaluation pipeline.</p>
</li>
<li>
<p><strong>computation_mode</strong>: str, 'default' or 'error_analysis'. Name of the computation mode. When a default computation mode measures metrics for sex_priv and sex_dis, an <code>error_analysis</code> mode measures metrics for (sex_priv, sex_priv_correct, sex_priv_incorrect) and (sex_dis, sex_dis_correct, sex_dis_incorrect). Therefore, a user can analyze how a model is certain about its incorrect predictions.</p>
</li>
<li>
<p><strong>n_estimators</strong>: int, the number of estimators for bootstrap to compute subgroup stability metrics.</p>
</li>
<li>
<p><strong>sensitive_attributes_dct</strong>: dict, a dictionary where keys are sensitive attribute names (including intersectional attributes), and values are disadvantaged values for these attributes. Intersectional attributes must include '&amp;' between sensitive attributes. You do not need to specify disadvantaged values for intersectional groups since they will be derived from disadvantaged values in sensitive_attributes_dct for each separate sensitive attribute in this intersectional pair.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">ROOT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;docs&#39;</span><span class="p">,</span> <span class="s1">&#39;examples&#39;</span><span class="p">)</span>
<span class="n">config_yaml_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ROOT_DIR</span><span class="p">,</span> <span class="s1">&#39;experiment_config.yaml&#39;</span><span class="p">)</span>
<span class="n">config_yaml_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">dataset_name: Law_School</span>
<span class="s2">bootstrap_fraction: 0.8</span>
<span class="s2">random_state: 42</span>
<span class="s2">computation_mode: error_analysis</span>
<span class="s2">n_estimators: 30  # Better to input the higher number of estimators than 100; this is only for this use case example</span>
<span class="s2">sensitive_attributes_dct: {&#39;male&#39;: &#39;0&#39;, &#39;race&#39;: &#39;Non-White&#39;, &#39;male&amp;race&#39;: None}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_yaml_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">config_yaml_content</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n">create_config_obj</span><span class="p">(</span><span class="n">config_yaml_path</span><span class="o">=</span><span class="n">config_yaml_path</span><span class="p">)</span>
<span class="n">SAVE_RESULTS_DIR_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ROOT_DIR</span><span class="p">,</span> <span class="s1">&#39;results&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">dataset_name</span><span class="si">}</span><span class="s1">_Metrics_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">__%H%M%S&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="preprocess-the-dataset-and-create-a-baseflowdataset-class">Preprocess the dataset and create a BaseFlowDataset class<a class="headerlink" href="#preprocess-the-dataset-and-create-a-baseflowdataset-class" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">virny.datasets</span> <span class="kn">import</span> <span class="n">LawSchoolDataset</span>

<span class="n">data_loader</span> <span class="o">=</span> <span class="n">LawSchoolDataset</span><span class="p">()</span>
<span class="n">data_loader</span><span class="o">.</span><span class="n">X_data</span><span class="p">[</span><span class="n">data_loader</span><span class="o">.</span><span class="n">X_data</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">5</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>decile1b</th>
      <th>decile3</th>
      <th>lsat</th>
      <th>ugpa</th>
      <th>zfygpa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10.0</td>
      <td>10.0</td>
      <td>44.0</td>
      <td>3.5</td>
      <td>1.33</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5.0</td>
      <td>4.0</td>
      <td>29.0</td>
      <td>3.5</td>
      <td>-0.11</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.0</td>
      <td>7.0</td>
      <td>37.0</td>
      <td>3.4</td>
      <td>0.63</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8.0</td>
      <td>7.0</td>
      <td>43.0</td>
      <td>3.3</td>
      <td>0.67</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.0</td>
      <td>2.0</td>
      <td>41.0</td>
      <td>3.3</td>
      <td>-0.67</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">column_transformer</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">(</span><span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;categorical_features&#39;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">sparse_output</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">categorical_columns</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;numerical_features&#39;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">(),</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">numerical_columns</span><span class="p">),</span>
<span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a binary race column for in-processing since aif360 inprocessors use a sensitive attribute during their learning.</span>
<span class="n">data_loader</span><span class="o">.</span><span class="n">X_data</span><span class="p">[</span><span class="s1">&#39;race_binary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">X_data</span><span class="p">[</span><span class="s1">&#39;race&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;White&#39;</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">base_flow_dataset</span> <span class="o">=</span> <span class="n">preprocess_dataset</span><span class="p">(</span><span class="n">data_loader</span><span class="o">=</span><span class="n">data_loader</span><span class="p">,</span>
                                       <span class="n">column_transformer</span><span class="o">=</span><span class="n">column_transformer</span><span class="p">,</span>
                                       <span class="n">sensitive_attributes_dct</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">sensitive_attributes_dct</span><span class="p">,</span>
                                       <span class="n">test_set_fraction</span><span class="o">=</span><span class="n">TEST_SET_FRACTION</span><span class="p">,</span>
                                       <span class="n">dataset_split_seed</span><span class="o">=</span><span class="n">DATASET_SPLIT_SEED</span><span class="p">)</span>
<span class="n">base_flow_dataset</span><span class="o">.</span><span class="n">X_train_val</span><span class="p">[</span><span class="s1">&#39;race_binary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">X_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">base_flow_dataset</span><span class="o">.</span><span class="n">X_train_val</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;race_binary&#39;</span><span class="p">]</span>
<span class="n">base_flow_dataset</span><span class="o">.</span><span class="n">X_test</span><span class="p">[</span><span class="s1">&#39;race_binary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">X_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">base_flow_dataset</span><span class="o">.</span><span class="n">X_test</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;race_binary&#39;</span><span class="p">]</span>
</code></pre></div>
<h3 id="define-an-inprocessor-and-create-a-wrapper-for-it">Define an inprocessor and create a wrapper for it<a class="headerlink" href="#define-an-inprocessor-and-create-a-wrapper-for-it" title="Permanent link">&para;</a></h3>
<p>To use inprocessors from AIF360 together with Virny, we need to create a wrapper to use it as a basic model in the <em>models_config</em>.</p>
<p>A wrapper should include the following methods:</p>
<ul>
<li>
<p><strong>fit(self, X, y)</strong>: fits an inprocessor based on X and y pandas dataframes. Returns self.</p>
</li>
<li>
<p><strong>predict_proba(self, X)</strong>: predicts using the fitted inprocessor based on X features pandas dataframe. Returns probabilities for <strong>ZERO</strong> class. These probabilities will be used by Virny in the downstream metric computation.</p>
</li>
<li>
<p><strong>predict(self, X)</strong>: predicts using the fitted inprocessor based on X features pandas dataframe. Returns labels for each sample.</p>
</li>
<li>
<p><strong><strong>copy</strong>(self)</strong> and <strong><strong>deepcopy</strong>(self, memo)</strong>: methods, which will be used during copy.copy(inprocessor_wrapper) and copy.deepcopy(inprocessor_wrapper). Return a new instance of inprocessor's wrapper.</p>
</li>
<li>
<p><strong>get_params(self)</strong>: returns parameters of the wrapper. Alignment with sklearn API.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">aif360.algorithms.inprocessing</span> <span class="kn">import</span> <span class="n">ExponentiatedGradientReduction</span>
<span class="kn">from</span> <span class="nn">virny.custom_classes.base_inprocessing_wrapper</span> <span class="kn">import</span> <span class="n">BaseInprocessingWrapper</span>
<span class="kn">from</span> <span class="nn">virny.utils.postprocessing_intervention_utils</span> <span class="kn">import</span> <span class="n">construct_binary_label_dataset_from_df</span>


<span class="k">class</span> <span class="nc">ExpGradientReductionWrapper</span><span class="p">(</span><span class="n">BaseInprocessingWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A wrapper for fair inprocessors from aif360. The wrapper aligns fit, predict, and predict_proba methods</span>
<span class="sd">    to be compatible with sklearn models.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    inprocessor</span>
<span class="sd">        An initialized inprocessor from aif360.</span>
<span class="sd">    sensitive_attr_for_intervention</span>
<span class="sd">        A sensitive attribute name to use in the fairness in-processing intervention.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">estimator</span><span class="p">,</span> <span class="n">sensitive_attr_for_intervention</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span> <span class="o">=</span> <span class="n">sensitive_attr_for_intervention</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">estimator</span> <span class="o">=</span> <span class="n">estimator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inprocessor</span> <span class="o">=</span> <span class="n">ExponentiatedGradientReduction</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">estimator</span><span class="p">,</span>
                                                          <span class="n">constraints</span><span class="o">=</span><span class="s1">&#39;DemographicParity&#39;</span><span class="p">,</span>
                                                          <span class="n">drop_prot_attr</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_estimator</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">estimator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ExpGradientReductionWrapper</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">new_estimator</span><span class="p">,</span>
                                           <span class="n">sensitive_attr_for_intervention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">):</span>
        <span class="n">new_estimator</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">estimator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ExpGradientReductionWrapper</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">new_estimator</span><span class="p">,</span>
                                           <span class="n">sensitive_attr_for_intervention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sensitive_attr_for_intervention&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">set_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inprocessor</span> <span class="o">=</span> <span class="n">ExponentiatedGradientReduction</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">estimator</span><span class="p">,</span>
                                                          <span class="n">constraints</span><span class="o">=</span><span class="s1">&#39;DemographicParity&#39;</span><span class="p">,</span>
                                                          <span class="n">drop_prot_attr</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">train_binary_dataset</span> <span class="o">=</span> <span class="n">construct_binary_label_dataset_from_df</span><span class="p">(</span><span class="n">X_sample</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                                                      <span class="n">y_sample</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                                                                      <span class="n">target_column</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span>
                                                                      <span class="n">sensitive_attribute</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span><span class="p">)</span>
        <span class="c1"># Fit an inprocessor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inprocessor</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_binary_dataset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">predict_proba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">y_empty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">test_binary_dataset</span> <span class="o">=</span> <span class="n">construct_binary_label_dataset_from_df</span><span class="p">(</span><span class="n">X_sample</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                                                     <span class="n">y_sample</span><span class="o">=</span><span class="n">y_empty</span><span class="p">,</span>
                                                                     <span class="n">target_column</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span>
                                                                     <span class="n">sensitive_attribute</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span><span class="p">)</span>
        <span class="n">test_dataset_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inprocessor</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_binary_dataset</span><span class="p">)</span>
        <span class="c1"># Set 1.0 since ExponentiatedGradientReduction can return probabilities slightly higher than 1.0.</span>
        <span class="c1"># This can cause Infinity values for entropy.</span>
        <span class="n">test_dataset_pred</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">test_dataset_pred</span><span class="o">.</span><span class="n">scores</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="c1"># Return 1 - test_dataset_pred.scores since scores are probabilities for label 1, not for label 0</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">test_dataset_pred</span><span class="o">.</span><span class="n">scores</span>

    <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">y_empty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">test_binary_dataset</span> <span class="o">=</span> <span class="n">construct_binary_label_dataset_from_df</span><span class="p">(</span><span class="n">X_sample</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                                                     <span class="n">y_sample</span><span class="o">=</span><span class="n">y_empty</span><span class="p">,</span>
                                                                     <span class="n">target_column</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span>
                                                                     <span class="n">sensitive_attribute</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sensitive_attr_for_intervention</span><span class="p">)</span>
        <span class="n">test_dataset_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inprocessor</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_binary_dataset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">test_dataset_pred</span><span class="o">.</span><span class="n">labels</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Define a name of a sensitive attribute for the in-processing intervention.</span>
<span class="c1"># Note that in the above wrapper, 1 is used as a favorable label, and 0 is used as an unfavorable label.</span>
<span class="n">sensitive_attr_for_intervention</span> <span class="o">=</span> <span class="s1">&#39;race_binary&#39;</span>

<span class="c1"># Define an estimator</span>
<span class="n">estimator</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s1">&#39;lbfgs&#39;</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">models_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ExponentiatedGradientReduction&#39;</span><span class="p">:</span> <span class="n">ExpGradientReductionWrapper</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">estimator</span><span class="p">,</span>
                                                                  <span class="n">sensitive_attr_for_intervention</span><span class="o">=</span><span class="n">sensitive_attr_for_intervention</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="subgroup-metrics-computation">Subgroup Metrics Computation<a class="headerlink" href="#subgroup-metrics-computation" title="Permanent link">&para;</a></h2>
<p>After the variables are input to a user interface, the interface uses subgroup analyzers to compute different sets of metrics for each privileged and disadvantaged subgroup. As for now, our library supports <strong>Subgroup Variance Analyzer</strong> and <strong>Subgroup Error Analyzer</strong>, but it is easily extensible to any other analyzers. When the variance and error analyzers complete metrics computation, their metrics are combined, returned in a matrix format, and stored in a file if defined.</p>
<div class="highlight"><pre><span></span><code><span class="n">metrics_dct</span> <span class="o">=</span> <span class="n">compute_metrics_with_config</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">base_flow_dataset</span><span class="p">,</span>
                                          <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
                                          <span class="n">models_config</span><span class="o">=</span><span class="n">models_config</span><span class="p">,</span>
                                          <span class="n">save_results_dir_path</span><span class="o">=</span><span class="n">SAVE_RESULTS_DIR_PATH</span><span class="p">,</span>
                                          <span class="n">notebook_logs_stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Analyze multiple models:   0%|          | 0/1 [00:00&lt;?, ?it/s]



Classifiers testing by bootstrap:   0%|          | 0/30 [00:00&lt;?, ?it/s]
</code></pre></div>
<p>Look at several columns in top rows of computed metrics</p>
<div class="highlight"><pre><span></span><code><span class="n">sample_model_metrics_df</span> <span class="o">=</span> <span class="n">metrics_dct</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">models_config</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]]</span>
<span class="n">sample_model_metrics_df</span><span class="p">[</span><span class="n">sample_model_metrics_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">6</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Metric</th>
      <th>overall</th>
      <th>male_priv</th>
      <th>male_priv_correct</th>
      <th>male_priv_incorrect</th>
      <th>male_dis</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Aleatoric_Uncertainty</td>
      <td>0.005905</td>
      <td>0.004883</td>
      <td>0.003296</td>
      <td>0.021364</td>
      <td>0.007256</td>
    </tr>
    <tr>
      <th>1</th>
      <td>IQR</td>
      <td>0.010355</td>
      <td>0.009922</td>
      <td>0.008073</td>
      <td>0.029115</td>
      <td>0.010926</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Mean_Prediction</td>
      <td>0.024633</td>
      <td>0.021842</td>
      <td>0.015440</td>
      <td>0.088320</td>
      <td>0.028322</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Overall_Uncertainty</td>
      <td>0.020169</td>
      <td>0.018285</td>
      <td>0.012946</td>
      <td>0.073729</td>
      <td>0.022659</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Statistical_Bias</td>
      <td>0.098458</td>
      <td>0.089847</td>
      <td>0.004210</td>
      <td>0.979146</td>
      <td>0.109838</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Std</td>
      <td>0.009615</td>
      <td>0.008868</td>
      <td>0.006229</td>
      <td>0.036276</td>
      <td>0.010603</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Epistemic_Uncertainty</td>
      <td>0.014264</td>
      <td>0.013402</td>
      <td>0.009650</td>
      <td>0.052365</td>
      <td>0.015403</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Label_Stability</td>
      <td>0.989087</td>
      <td>0.989696</td>
      <td>0.992222</td>
      <td>0.963462</td>
      <td>0.988281</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Jitter</td>
      <td>0.008198</td>
      <td>0.007553</td>
      <td>0.005556</td>
      <td>0.028294</td>
      <td>0.009050</td>
    </tr>
    <tr>
      <th>9</th>
      <td>TPR</td>
      <td>0.990612</td>
      <td>0.991163</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.989861</td>
    </tr>
    <tr>
      <th>10</th>
      <td>TNR</td>
      <td>0.141204</td>
      <td>0.133028</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.149533</td>
    </tr>
    <tr>
      <th>11</th>
      <td>PPV</td>
      <td>0.908711</td>
      <td>0.918534</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.895642</td>
    </tr>
    <tr>
      <th>12</th>
      <td>FNR</td>
      <td>0.009388</td>
      <td>0.008837</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.010139</td>
    </tr>
    <tr>
      <th>13</th>
      <td>FPR</td>
      <td>0.858796</td>
      <td>0.866972</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.850467</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Accuracy</td>
      <td>0.902404</td>
      <td>0.912162</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.889509</td>
    </tr>
    <tr>
      <th>15</th>
      <td>F1</td>
      <td>0.947895</td>
      <td>0.953468</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.940397</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Selection-Rate</td>
      <td>0.976923</td>
      <td>0.979730</td>
      <td>0.986574</td>
      <td>0.908654</td>
      <td>0.973214</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Sample_Size</td>
      <td>4160.000000</td>
      <td>2368.000000</td>
      <td>2160.000000</td>
      <td>208.000000</td>
      <td>1792.000000</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="group-metrics-composition">Group Metrics Composition<a class="headerlink" href="#group-metrics-composition" title="Permanent link">&para;</a></h2>
<p><strong>Metrics Composer</strong> is responsible for this second stage of the model audit. Currently, it computes our custom group fairness and stability metrics, but extending it for new group metrics is very simple. We noticed that more and more group metrics have appeared during the last decade, but most of them are based on the same subgroup metrics. Hence, such a separation of subgroup and group metrics computation allows one to experiment with different combinations of subgroup metrics and avoid subgroup metrics recomputation for a new set of grouped metrics.</p>
<div class="highlight"><pre><span></span><code><span class="n">models_metrics_dct</span> <span class="o">=</span> <span class="n">read_model_metric_dfs</span><span class="p">(</span><span class="n">SAVE_RESULTS_DIR_PATH</span><span class="p">,</span> <span class="n">model_names</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">models_config</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">metrics_composer</span> <span class="o">=</span> <span class="n">MetricsComposer</span><span class="p">(</span><span class="n">models_metrics_dct</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">sensitive_attributes_dct</span><span class="p">)</span>
</code></pre></div>
<p>Compute composed metrics</p>
<div class="highlight"><pre><span></span><code><span class="n">models_composed_metrics_df</span> <span class="o">=</span> <span class="n">metrics_composer</span><span class="o">.</span><span class="n">compose_metrics</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">models_composed_metrics_df</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Metric</th>
      <th>male</th>
      <th>race</th>
      <th>male&amp;race</th>
      <th>Model_Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Accuracy_Difference</td>
      <td>-0.022653</td>
      <td>-0.178877</td>
      <td>-0.157307</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Aleatoric_Uncertainty_Difference</td>
      <td>0.002373</td>
      <td>0.018372</td>
      <td>0.021097</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Aleatoric_Uncertainty_Ratio</td>
      <td>1.485922</td>
      <td>6.916304</td>
      <td>5.985519</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Epistemic_Uncertainty_Difference</td>
      <td>0.002001</td>
      <td>0.009870</td>
      <td>0.014769</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Epistemic_Uncertainty_Ratio</td>
      <td>1.149317</td>
      <td>1.773535</td>
      <td>2.128039</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Equalized_Odds_FNR</td>
      <td>0.001302</td>
      <td>0.001559</td>
      <td>0.003110</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Equalized_Odds_FPR</td>
      <td>-0.016505</td>
      <td>0.076428</td>
      <td>0.045638</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>7</th>
      <td>IQR_Difference</td>
      <td>0.001005</td>
      <td>0.010219</td>
      <td>0.012572</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Jitter_Difference</td>
      <td>0.001498</td>
      <td>0.009698</td>
      <td>0.013220</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Label_Stability_Ratio</td>
      <td>0.998571</td>
      <td>0.988954</td>
      <td>0.984495</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Label_Stability_Difference</td>
      <td>-0.001415</td>
      <td>-0.010944</td>
      <td>-0.015355</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Overall_Uncertainty_Difference</td>
      <td>0.004374</td>
      <td>0.028242</td>
      <td>0.035866</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Overall_Uncertainty_Ratio</td>
      <td>1.239210</td>
      <td>2.780147</td>
      <td>3.070293</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Statistical_Parity_Difference</td>
      <td>-0.006515</td>
      <td>-0.011852</td>
      <td>-0.014432</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Disparate_Impact</td>
      <td>0.993350</td>
      <td>0.987890</td>
      <td>0.985245</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Std_Difference</td>
      <td>0.001734</td>
      <td>0.009583</td>
      <td>0.013289</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Std_Ratio</td>
      <td>1.195550</td>
      <td>2.175074</td>
      <td>2.552202</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Equalized_Odds_TNR</td>
      <td>0.016505</td>
      <td>-0.076428</td>
      <td>-0.045638</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Equalized_Odds_TPR</td>
      <td>-0.001302</td>
      <td>-0.001559</td>
      <td>-0.003110</td>
      <td>ExponentiatedGradientReduction</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="metrics-visualization-and-reporting">Metrics Visualization and Reporting<a class="headerlink" href="#metrics-visualization-and-reporting" title="Permanent link">&para;</a></h2>
<p><strong>Metric Visualizer</strong> allows us to build static visualizations for the computed metrics. It unifies different preprocessing methods for the computed metrics and creates various data formats required for visualizations. Hence, users can simply call methods of the <em>MetricsVisualizer</em> class and get custom plots for diverse metric analysis.</p>
<div class="highlight"><pre><span></span><code><span class="n">visualizer</span> <span class="o">=</span> <span class="n">MetricsVisualizer</span><span class="p">(</span><span class="n">models_metrics_dct</span><span class="p">,</span> <span class="n">models_composed_metrics_df</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">dataset_name</span><span class="p">,</span>
                               <span class="n">model_names</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">models_config</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                               <span class="n">sensitive_attributes_dct</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">sensitive_attributes_dct</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">visualizer</span><span class="o">.</span><span class="n">create_overall_metrics_bar_char</span><span class="p">(</span>
    <span class="n">metric_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;F1&#39;</span><span class="p">,</span> <span class="s1">&#39;TPR&#39;</span><span class="p">,</span> <span class="s1">&#39;TNR&#39;</span><span class="p">,</span> <span class="s1">&#39;PPV&#39;</span><span class="p">,</span> <span class="s1">&#39;Selection-Rate&#39;</span><span class="p">],</span>
    <span class="n">plot_title</span><span class="o">=</span><span class="s2">&quot;Accuracy Metrics&quot;</span>
<span class="p">)</span>
</code></pre></div>
<div id="altair-viz-8ce6245c8e8d4e6f8824812fc7a9ae5c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8ce6245c8e8d4e6f8824812fc7a9ae5c") {
      outputDiv = document.getElementById("altair-viz-8ce6245c8e8d4e6f8824812fc7a9ae5c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"labelFontSize": 16, "titleFontSize": 20}, "headerRow": {"labelAlign": "left", "labelAngle": 0, "labelFontSize": 16, "labelPadding": 10, "titleFontSize": 20}}, "data": {"name": "data-00bd6fa3450886cb6828b3ef903a5bbc"}, "mark": "bar", "encoding": {"color": {"field": "model_name", "legend": {"labelFontSize": 15, "labelLimit": 300, "title": "Model Name", "titleFontSize": 15, "titleLimit": 300}, "scale": {"scheme": "tableau20"}, "type": "nominal"}, "row": {"field": "metric", "sort": ["Accuracy", "F1", "TPR", "TNR", "PPV", "Selection-Rate"], "title": "Accuracy Metrics", "type": "nominal"}, "x": {"axis": {"grid": true}, "field": "overall", "title": "", "type": "quantitative"}, "y": {"axis": null, "field": "model_name", "type": "nominal"}}, "height": 50, "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-00bd6fa3450886cb6828b3ef903a5bbc": [{"overall": 0.9024038461538462, "metric": "Accuracy", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.9478952772073922, "metric": "F1", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.9087106299212598, "metric": "PPV", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.9769230769230768, "metric": "Selection-Rate", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.1412037037037037, "metric": "TNR", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.9906115879828328, "metric": "TPR", "model_name": "ExponentiatedGradientReduction"}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><code><span class="n">visualizer</span><span class="o">.</span><span class="n">create_overall_metrics_bar_char</span><span class="p">(</span>
    <span class="n">metric_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Aleatoric_Uncertainty&#39;</span><span class="p">,</span> <span class="s1">&#39;Epistemic_Uncertainty&#39;</span><span class="p">,</span> <span class="s1">&#39;Std&#39;</span><span class="p">,</span> <span class="s1">&#39;IQR&#39;</span><span class="p">,</span> <span class="s1">&#39;Jitter&#39;</span><span class="p">],</span>
    <span class="n">plot_title</span><span class="o">=</span><span class="s2">&quot;Stability and Uncertainty Metrics&quot;</span>
<span class="p">)</span>
</code></pre></div>
<div id="altair-viz-f83bc2fb3db24a83af2824154ab458aa"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-f83bc2fb3db24a83af2824154ab458aa") {
      outputDiv = document.getElementById("altair-viz-f83bc2fb3db24a83af2824154ab458aa");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"labelFontSize": 16, "titleFontSize": 20}, "headerRow": {"labelAlign": "left", "labelAngle": 0, "labelFontSize": 16, "labelPadding": 10, "titleFontSize": 20}}, "data": {"name": "data-239735fb1c50932b034e359354331276"}, "mark": "bar", "encoding": {"color": {"field": "model_name", "legend": {"labelFontSize": 15, "labelLimit": 300, "title": "Model Name", "titleFontSize": 15, "titleLimit": 300}, "scale": {"scheme": "tableau20"}, "type": "nominal"}, "row": {"field": "metric", "sort": ["Aleatoric_Uncertainty", "Epistemic_Uncertainty", "Std", "IQR", "Jitter"], "title": "Stability and Uncertainty Metrics", "type": "nominal"}, "x": {"axis": {"grid": true}, "field": "overall", "title": "", "type": "quantitative"}, "y": {"axis": null, "field": "model_name", "type": "nominal"}}, "height": 50, "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-239735fb1c50932b034e359354331276": [{"overall": 0.0059052534542708, "metric": "Aleatoric_Uncertainty", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.0142638880612976, "metric": "Epistemic_Uncertainty", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.0103545201281254, "metric": "IQR", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.0081979442970822, "metric": "Jitter", "model_name": "ExponentiatedGradientReduction"}, {"overall": 0.0096154295342772, "metric": "Std", "model_name": "ExponentiatedGradientReduction"}]}}, {"mode": "vega-lite"});
</script>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        

<!-- Application footer -->
<footer class="md-footer">

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2024
          </div>
        
        Made with
        <a
          href="https://squidfunk.github.io/mkdocs-material/"
          target="_blank" rel="noopener"
        >
          Material for MkDocs
        </a>
      </div>

      <!-- Social links -->
      <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/DataResponsibly/Virny" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>